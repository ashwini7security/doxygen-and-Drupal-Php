<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Shopcart: update_do_one</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Shopcart
   &#160;<span id="projectnumber">version2.0</span>
   </div>
   <div id="projectbrief">Shoppingcart</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="update_8inc.html">update.inc</a>      </li>
    </ul>
  </div>
</div>
<div class="contents">
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td valign="top">
      <div class="navtab">
        <table>
          <tr><td class="navtab"><a class="qindex" href="update_8inc_acba191c88d6f0e38bec3a5f873f57108.html#acba191c88d6f0e38bec3a5f873f57108">REQUIRED_D6_SCHEMA_VERSION</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="update_8inc_a6ccab16044efda416011fc20367d9344.html#a6ccab16044efda416011fc20367d9344">update_already_performed</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="update_8inc_aa4dd3d84e553f6bf25ad19608152d5b7.html#aa4dd3d84e553f6bf25ad19608152d5b7">update_batch</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="update_8inc_aafca47c65645d8463d85a3fa7884c220.html#aafca47c65645d8463d85a3fa7884c220">update_build_dependency_graph</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="update_8inc_a39592132a77fd791c44a8d6faf362cb0.html#a39592132a77fd791c44a8d6faf362cb0">update_check_incompatibility</a></td></tr>
          <tr><td class="navtab"><a class="qindexHL" href="update_8inc_ac46854f64e50a81361ed8816b8f0ce7e.html#ac46854f64e50a81361ed8816b8f0ce7e">update_do_one</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="update_8inc_a80f7fdd8ca66ebda4959b9429fc343f3.html#a80f7fdd8ca66ebda4959b9429fc343f3">update_finished</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="update_8inc_ab86cb0f00b89fc52f7f6294be9a1e33c.html#ab86cb0f00b89fc52f7f6294be9a1e33c">update_fix_compatibility</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="update_8inc_a349ad25ac5547fbb44556538758988a2.html#a349ad25ac5547fbb44556538758988a2">update_fix_d7_block_deltas</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="update_8inc_a4c65cc44fc9d615c6f69ac8ecb57bf5a.html#a4c65cc44fc9d615c6f69ac8ecb57bf5a">update_fix_d7_install_profile</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="update_8inc_a00697f7fb179855f3c3fa65105abee94.html#a00697f7fb179855f3c3fa65105abee94">update_fix_d7_requirements</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="update_8inc_a1e41248922d100f2412b8471c05c59be.html#a1e41248922d100f2412b8471c05c59be">update_get_d6_session_name</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="update_8inc_ad268e1662e1d06a85f3d51dfec9955b2.html#ad268e1662e1d06a85f3d51dfec9955b2">update_get_update_function_list</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="update_8inc_ae95fb5ec58e85fd5c10c56345fd7cabe.html#ae95fb5ec58e85fd5c10c56345fd7cabe">update_get_update_list</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="update_8inc_ab41c0d635b6a220d269146f778a6a245.html#ab41c0d635b6a220d269146f778a6a245">update_is_missing</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="update_8inc_a39f4938dea0ce704d1e426243cec11ec.html#a39f4938dea0ce704d1e426243cec11ec">update_parse_db_url</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="update_8inc_ae3ce2c866dce2d33c363b57136a2ba84.html#ae3ce2c866dce2d33c363b57136a2ba84">update_prepare_d7_bootstrap</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="update_8inc_aa931d6cdddc2e9e0ec96d240523056e9.html#aa931d6cdddc2e9e0ec96d240523056e9">update_resolve_dependencies</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="update_8inc_af82e7fa9b13df713eb110a4e782b0e69.html#af82e7fa9b13df713eb110a4e782b0e69">update_retrieve_dependencies</a></td></tr>
        </table>
      </div>
   </td>
   <td valign="top" class="mempage">
<a class="anchor" id="ac46854f64e50a81361ed8816b8f0ce7e"></a><!-- doxytag: member="update.inc::update_do_one" ref="ac46854f64e50a81361ed8816b8f0ce7e" args="($module, $number, $dependency_map, &amp;$context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="update_8inc_ac46854f64e50a81361ed8816b8f0ce7e.html#ac46854f64e50a81361ed8816b8f0ce7e">update_do_one</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>dependency_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Perform one update and store the results for display on finished page. </p>
<p>If an update function completes successfully, it should return a message as a string indicating success, for example: </p>
<div class="fragment"><pre class="fragment"> <span class="keywordflow">return</span> <a class="code" href="bootstrap_8inc_a1be9937b04ff350b23d01fddef1e031a.html#a1be9937b04ff350b23d01fddef1e031a" title="Replaces placeholders with sanitized values in a string.">t</a>(<span class="stringliteral">&#39;New index added successfully.&#39;</span>);
</pre></div><p>Alternatively, it may return nothing. In that case, no message will be displayed at all.</p>
<p>If it fails for whatever reason, it should throw an instance of <a class="el" href="classDrupalUpdateException.html">DrupalUpdateException</a> with an appropriate error message, for example: </p>
<div class="fragment"><pre class="fragment"> <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classDrupalUpdateException.html">DrupalUpdateException</a>(<a class="code" href="bootstrap_8inc_a1be9937b04ff350b23d01fddef1e031a.html#a1be9937b04ff350b23d01fddef1e031a" title="Replaces placeholders with sanitized values in a string.">t</a>(<span class="stringliteral">&#39;Description of what went wrong&#39;</span>));
</pre></div><p>If an exception is thrown, the current update and all updates that depend on it will be aborted. The schema version will not be updated in this case, and all the aborted updates will continue to appear on <a class="el" href="update_8php.html" title="Administrative page for handling updates from one Drupal version to another.">update.php</a> as updates that have not yet been run.</p>
<p>If an update function needs to be re-run as part of a batch process, it should accept the $sandbox array by reference as its first parameter and set the #finished property to the percentage completed that it is, as a fraction of 1.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">$module</td><td>The module whose update will be run. </td></tr>
    <tr><td class="paramname">$number</td><td>The update number to run. </td></tr>
    <tr><td class="paramname">$dependency_map</td><td>An array whose keys are the names of all update functions that will be performed during this batch process, and whose values are arrays of other update functions that each one depends on. </td></tr>
    <tr><td class="paramname">$context</td><td>The batch context array.</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="update_8inc_aa931d6cdddc2e9e0ec96d240523056e9.html#aa931d6cdddc2e9e0ec96d240523056e9" title="Resolves dependencies in a set of module updates, and orders them correctly.">update_resolve_dependencies()</a> </dd></dl>

<p>Definition at line <a class="el" href="update_8inc_source.html#l00950">950</a> of file <a class="el" href="update_8inc_source.html">update.inc</a>.</p>

</div>
</div>
    </td>
  </tr>
</table>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 22 2012 16:46:16 for Shopcart by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
