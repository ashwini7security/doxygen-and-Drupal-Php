<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Shopcart: DrupalCacheArray Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Shopcart
   &#160;<span id="projectnumber">version2.0</span>
   </div>
   <div id="projectbrief">Shoppingcart</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">DrupalCacheArray Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="DrupalCacheArray" -->
<p>Provides a caching wrapper to be used in place of large array structures.  
 <a href="classDrupalCacheArray.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for DrupalCacheArray:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classDrupalCacheArray.png" usemap="#DrupalCacheArray_map" alt=""/>
  <map id="DrupalCacheArray_map" name="DrupalCacheArray_map">
<area href="classSchemaCache.html" title="Extends DrupalCacheArray to allow for dynamic building of the schema cache." alt="SchemaCache" shape="rect" coords="0,56,120,80"/>
</map>
 </div></div>

<p><a href="classDrupalCacheArray-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi_gadbc374d9057276944d38062e769a1a99.html#gadbc374d9057276944d38062e769a1a99">__construct</a> ($cid, $bin)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a <a class="el" href="classDrupalCacheArray.html" title="Provides a caching wrapper to be used in place of large array structures.">DrupalCacheArray</a> object.  <a href="group__schemaapi_gadbc374d9057276944d38062e769a1a99.html#gadbc374d9057276944d38062e769a1a99"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi_gabec90ca8c02f7c14dfbf66fd9e6bb5dd.html#gabec90ca8c02f7c14dfbf66fd9e6bb5dd">offsetExists</a> ($offset)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements ArrayAccess::offsetExists().  <a href="group__schemaapi_gabec90ca8c02f7c14dfbf66fd9e6bb5dd.html#gabec90ca8c02f7c14dfbf66fd9e6bb5dd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi_ga57be4d1b39bee68ee1c395c1cd9a2de5.html#ga57be4d1b39bee68ee1c395c1cd9a2de5">offsetGet</a> ($offset)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements ArrayAccess::offsetGet().  <a href="group__schemaapi_ga57be4d1b39bee68ee1c395c1cd9a2de5.html#ga57be4d1b39bee68ee1c395c1cd9a2de5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi_ga0d3377e6f4b8c592f006a75f8eadf21a.html#ga0d3377e6f4b8c592f006a75f8eadf21a">offsetSet</a> ($offset, $value)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements ArrayAccess::offsetSet().  <a href="group__schemaapi_ga0d3377e6f4b8c592f006a75f8eadf21a.html#ga0d3377e6f4b8c592f006a75f8eadf21a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi_ga8bb43551e89c35590c56a49f8fb54e3f.html#ga8bb43551e89c35590c56a49f8fb54e3f">offsetUnset</a> ($offset)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements ArrayAccess::offsetUnset().  <a href="group__schemaapi_ga8bb43551e89c35590c56a49f8fb54e3f.html#ga8bb43551e89c35590c56a49f8fb54e3f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi_ga63c3aa47f3a451f0c5182800d29d5d9f.html#ga63c3aa47f3a451f0c5182800d29d5d9f">__destruct</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructs the <a class="el" href="classDrupalCacheArray.html" title="Provides a caching wrapper to be used in place of large array structures.">DrupalCacheArray</a> object.  <a href="group__schemaapi_ga63c3aa47f3a451f0c5182800d29d5d9f.html#ga63c3aa47f3a451f0c5182800d29d5d9f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrupalCacheArray_adbc374d9057276944d38062e769a1a99.html#adbc374d9057276944d38062e769a1a99">__construct</a> ($cid, $bin)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrupalCacheArray_a0d87b8b0e005c00bbf7fa6ed11cd1e26.html#a0d87b8b0e005c00bbf7fa6ed11cd1e26">initializeRegistry</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the full theme registry.  <a href="#a0d87b8b0e005c00bbf7fa6ed11cd1e26"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrupalCacheArray_abec90ca8c02f7c14dfbf66fd9e6bb5dd.html#abec90ca8c02f7c14dfbf66fd9e6bb5dd">offsetExists</a> ($offset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrupalCacheArray_a57be4d1b39bee68ee1c395c1cd9a2de5.html#a57be4d1b39bee68ee1c395c1cd9a2de5">offsetGet</a> ($offset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrupalCacheArray_a33d892a839b353177e2483f6946178e9.html#a33d892a839b353177e2483f6946178e9">resolveCacheMiss</a> ($offset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrupalCacheArray_a9d99af903ba2660c09ca835e63c79118.html#a9d99af903ba2660c09ca835e63c79118">set</a> ($data, $lock=TRUE)</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi_ga27687007f42979bdb8999683f3270c4a.html#ga27687007f42979bdb8999683f3270c4a">persist</a> ($offset, $<a class="el" href="group__schemaapi_ga27687007f42979bdb8999683f3270c4a.html#ga27687007f42979bdb8999683f3270c4a">persist</a>=TRUE)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Flags an offset value to be written to the persistent cache.  <a href="group__schemaapi_ga27687007f42979bdb8999683f3270c4a.html#ga27687007f42979bdb8999683f3270c4a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi_ga33d892a839b353177e2483f6946178e9.html#ga33d892a839b353177e2483f6946178e9">resolveCacheMiss</a> ($offset)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolves a cache miss.  <a href="group__schemaapi_ga33d892a839b353177e2483f6946178e9.html#ga33d892a839b353177e2483f6946178e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi_ga9d99af903ba2660c09ca835e63c79118.html#ga9d99af903ba2660c09ca835e63c79118">set</a> ($data, $lock=TRUE)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a value to the persistent cache immediately.  <a href="group__schemaapi_ga9d99af903ba2660c09ca835e63c79118.html#ga9d99af903ba2660c09ca835e63c79118"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi_ga616fba4b18bafdf4cc6e34c4b5696d58.html#ga616fba4b18bafdf4cc6e34c4b5696d58">$cid</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A cid to pass to <a class="el" href="cache_8inc_a48081f36334909f561ef4f538fa640d2.html#a48081f36334909f561ef4f538fa640d2" title="Stores data in the persistent cache.">cache_set()</a> and <a class="el" href="cache_8inc_a9d873815c28909b61c3a6188b383f8a3.html#a9d873815c28909b61c3a6188b383f8a3" title="Returns data from the persistent cache.">cache_get()</a>.  <a href="group__schemaapi_ga616fba4b18bafdf4cc6e34c4b5696d58.html#ga616fba4b18bafdf4cc6e34c4b5696d58"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi_ga29eeef3160c70f129c447e796e330cdb.html#ga29eeef3160c70f129c447e796e330cdb">$bin</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A bin to pass to <a class="el" href="cache_8inc_a48081f36334909f561ef4f538fa640d2.html#a48081f36334909f561ef4f538fa640d2" title="Stores data in the persistent cache.">cache_set()</a> and <a class="el" href="cache_8inc_a9d873815c28909b61c3a6188b383f8a3.html#a9d873815c28909b61c3a6188b383f8a3" title="Returns data from the persistent cache.">cache_get()</a>.  <a href="group__schemaapi_ga29eeef3160c70f129c447e796e330cdb.html#ga29eeef3160c70f129c447e796e330cdb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi_ga0ba2e712f18ec2c8ee8bf97d115c85d1.html#ga0ba2e712f18ec2c8ee8bf97d115c85d1">$keysToPersist</a> = array()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">An array of keys to add to the cache at the end of the request.  <a href="group__schemaapi_ga0ba2e712f18ec2c8ee8bf97d115c85d1.html#ga0ba2e712f18ec2c8ee8bf97d115c85d1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schemaapi_ga696fd96aa3639a9d7d968961db9d5819.html#ga696fd96aa3639a9d7d968961db9d5819">$storage</a> = array()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Storage for the data itself.  <a href="group__schemaapi_ga696fd96aa3639a9d7d968961db9d5819.html#ga696fd96aa3639a9d7d968961db9d5819"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrupalCacheArray_a7e5f106aba0180abc924fee9b2137dd3.html#a7e5f106aba0180abc924fee9b2137dd3">$persistable</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether the partial registry can be persisted to the cache.  <a href="#a7e5f106aba0180abc924fee9b2137dd3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrupalCacheArray_a31477bbed77e94f393202701a2179643.html#a31477bbed77e94f393202701a2179643">$completeRegistry</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The complete theme registry array.  <a href="#a31477bbed77e94f393202701a2179643"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Provides a caching wrapper to be used in place of large array structures. </p>
<p>Builds the run-time theme registry.</p>
<p>This class should be extended by systems that need to cache large amounts of data and have it represented as an array to calling functions. These arrays can become very large, so ArrayAccess is used to allow different strategies to be used for caching internally (lazy loading, building caches over time etc.). This can dramatically reduce the amount of data that needs to be loaded from cache backends on each request, and memory usage from static caches of that same data.</p>
<p>Note that array_* functions do not work with ArrayAccess. Systems using <a class="el" href="classDrupalCacheArray.html" title="Provides a caching wrapper to be used in place of large array structures.">DrupalCacheArray</a> should use this only internally. If providing API functions that return the full array, this can be cached separately or returned directly. However since <a class="el" href="classDrupalCacheArray.html" title="Provides a caching wrapper to be used in place of large array structures.">DrupalCacheArray</a> holds partial content by design, it should be a normal PHP array or otherwise contain the full structure.</p>
<p>Note also that due to limitations in PHP prior to 5.3.4, it is impossible to write directly to the contents of nested arrays contained in this object. Only writes to the top-level array elements are possible. So if you previously had set $object['foo'] = array(1, 2, 'bar' =&gt; 'baz'), but later want to change the value of 'bar' from 'baz' to 'foobar', you cannot do so a targeted write like $object['foo']['bar'] = 'foobar'. Instead, you must overwrite the entire top-level 'foo' array with the entire set of new values: $object['foo'] = array(1, 2, 'bar' =&gt; 'foobar'). Due to this same limitation, attempts to create references to any contained data, nested or otherwise, will fail silently. So $var = &amp;$object['foo'] will not throw an error, and $var will be populated with the contents of $object['foo'], but that data will be passed by value, not reference. For more information on the PHP limitation, see the note in the official PHP documentation at· <a href="http://php.net/manual/en/arrayaccess.offsetget.php">http://php.net/manual/en/arrayaccess.offsetget.php</a> on ArrayAccess::offsetGet().</p>
<p>By default, the class accounts for caches where calling functions might request keys in the array that won't exist even after a cache rebuild. This prevents situations where a cache rebuild would be triggered over and over due to a 'missing' item. These cases are stored internally as a value of NULL. This means that the <a class="el" href="group__schemaapi_ga57be4d1b39bee68ee1c395c1cd9a2de5.html#ga57be4d1b39bee68ee1c395c1cd9a2de5" title="Implements ArrayAccess::offsetGet().">offsetGet()</a> and <a class="el" href="group__schemaapi_gabec90ca8c02f7c14dfbf66fd9e6bb5dd.html#gabec90ca8c02f7c14dfbf66fd9e6bb5dd" title="Implements ArrayAccess::offsetExists().">offsetExists()</a> methods must be overridden if caching an array where the top level values can legitimately be NULL, and where $object-&gt;<a class="el" href="group__schemaapi_gabec90ca8c02f7c14dfbf66fd9e6bb5dd.html#gabec90ca8c02f7c14dfbf66fd9e6bb5dd" title="Implements ArrayAccess::offsetExists().">offsetExists()</a> needs to correctly return (equivalent to array_key_exists() vs. isset()). This should not be necessary in the majority of cases.</p>
<p>Classes extending this class must override at least the <a class="el" href="group__schemaapi_ga33d892a839b353177e2483f6946178e9.html#ga33d892a839b353177e2483f6946178e9" title="Resolves a cache miss.">resolveCacheMiss()</a> method to have a working implementation.</p>
<p><a class="el" href="group__schemaapi_ga0d3377e6f4b8c592f006a75f8eadf21a.html#ga0d3377e6f4b8c592f006a75f8eadf21a" title="Implements ArrayAccess::offsetSet().">offsetSet()</a> is not overridden by this class by default. In practice this means that assigning an offset via arrayAccess will only apply while the object is in scope and will not be written back to the persistent cache. This follows a similar pattern to static vs. persistent caching in procedural code. Extending classes may wish to alter this behavior, for example by overriding <a class="el" href="group__schemaapi_ga0d3377e6f4b8c592f006a75f8eadf21a.html#ga0d3377e6f4b8c592f006a75f8eadf21a" title="Implements ArrayAccess::offsetSet().">offsetSet()</a> and adding an automatic call to <a class="el" href="group__schemaapi_ga27687007f42979bdb8999683f3270c4a.html#ga27687007f42979bdb8999683f3270c4a" title="Flags an offset value to be written to the persistent cache.">persist()</a>.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classSchemaCache.html" title="Extends DrupalCacheArray to allow for dynamic building of the schema cache.">SchemaCache</a></dd></dl>
<p>Extends <a class="el" href="classDrupalCacheArray.html" title="Provides a caching wrapper to be used in place of large array structures.">DrupalCacheArray</a> to allow the theme registry to be accessed as a complete registry, while internally caching only the parts of the registry that are actually in use on the site. On cache misses the complete theme registry is loaded and used to update the run-time cache. </p>

<p>Definition at line <a class="el" href="bootstrap_8inc_source.html#l00287">287</a> of file <a class="el" href="bootstrap_8inc_source.html">bootstrap.inc</a>.</p>
</div><hr/>The documentation for this class was generated from the following files:<ul>
<li>includes/<a class="el" href="bootstrap_8inc_source.html">bootstrap.inc</a></li>
<li>includes/<a class="el" href="theme_8inc_source.html">theme.inc</a></li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 22 2012 16:46:22 for Shopcart by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
