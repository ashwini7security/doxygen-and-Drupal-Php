<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Shopcart: Database abstraction layer</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Shopcart
   &#160;<span id="projectnumber">version2.0</span>
   </div>
   <div id="projectbrief">Shoppingcart</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#files">Files</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Database abstraction layer</div>  </div>
</div><!--header-->
<div class="contents">

<p>Allow the use of different database servers using the same code base.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnection.html">DatabaseConnection</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Base <a class="el" href="classDatabase.html" title="Primary front-controller for the database system.">Database</a> API class.  <a href="classDatabaseConnection.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabase.html">Database</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Primary front-controller for the database system.  <a href="classDatabase.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseTransactionNoActiveException.html">DatabaseTransactionNoActiveException</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classException.html" title="to throw error if a module update fails.">Exception</a> for when popTransaction() is called with no active transaction.  <a href="classDatabaseTransactionNoActiveException.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseTransactionNameNonUniqueException.html">DatabaseTransactionNameNonUniqueException</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classException.html" title="to throw error if a module update fails.">Exception</a> thrown when a savepoint or transaction name occurs twice.  <a href="classDatabaseTransactionNameNonUniqueException.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseTransactionCommitFailedException.html">DatabaseTransactionCommitFailedException</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classException.html" title="to throw error if a module update fails.">Exception</a> thrown when a commit() function fails.  <a href="classDatabaseTransactionCommitFailedException.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseTransactionExplicitCommitNotAllowedException.html">DatabaseTransactionExplicitCommitNotAllowedException</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classException.html" title="to throw error if a module update fails.">Exception</a> to deny attempts to explicitly manage transactions.  <a href="classDatabaseTransactionExplicitCommitNotAllowedException.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseTransactionOutOfOrderException.html">DatabaseTransactionOutOfOrderException</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classException.html" title="to throw error if a module update fails.">Exception</a> thrown when a rollback() resulted in other active transactions being rolled-back.  <a href="classDatabaseTransactionOutOfOrderException.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInvalidMergeQueryException.html">InvalidMergeQueryException</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classException.html" title="to throw error if a module update fails.">Exception</a> thrown for merge queries that do not make semantic sense.  <a href="classInvalidMergeQueryException.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFieldsOverlapException.html">FieldsOverlapException</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classException.html" title="to throw error if a module update fails.">Exception</a> thrown if an insert query specifies a field twice.  <a href="classFieldsOverlapException.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNoFieldsException.html">NoFieldsException</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classException.html" title="to throw error if a module update fails.">Exception</a> thrown if an insert query doesn't specify insert or default fields.  <a href="classNoFieldsException.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseConnectionNotDefinedException.html">DatabaseConnectionNotDefinedException</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classException.html" title="to throw error if a module update fails.">Exception</a> thrown if an undefined database connection is requested.  <a href="classDatabaseConnectionNotDefinedException.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseDriverNotSpecifiedException.html">DatabaseDriverNotSpecifiedException</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classException.html" title="to throw error if a module update fails.">Exception</a> thrown if no driver is specified for a database connection.  <a href="classDatabaseDriverNotSpecifiedException.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseTransaction.html">DatabaseTransaction</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A wrapper class for creating and managing database transactions.  <a href="classDatabaseTransaction.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceDatabaseStatementInterface.html">DatabaseStatementInterface</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a prepared statement.  <a href="interfaceDatabaseStatementInterface.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseStatementBase.html">DatabaseStatementBase</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Default implementation of <a class="el" href="interfaceDatabaseStatementInterface.html" title="Represents a prepared statement.">DatabaseStatementInterface</a>.  <a href="classDatabaseStatementBase.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseStatementEmpty.html">DatabaseStatementEmpty</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Empty implementation of a database statement.  <a href="classDatabaseStatementEmpty.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseStatementPrefetch.html">DatabaseStatementPrefetch</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">An implementation of <a class="el" href="interfaceDatabaseStatementInterface.html" title="Represents a prepared statement.">DatabaseStatementInterface</a> that prefetches all data.  <a href="classDatabaseStatementPrefetch.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceQueryConditionInterface.html">QueryConditionInterface</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface for a conditional clause in a query.  <a href="interfaceQueryConditionInterface.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceQueryAlterableInterface.html">QueryAlterableInterface</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface for a query that can be manipulated via an alter hook.  <a href="interfaceQueryAlterableInterface.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceQueryPlaceholderInterface.html">QueryPlaceholderInterface</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface for a query that accepts placeholders.  <a href="interfaceQueryPlaceholderInterface.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuery.html">Query</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Base class for query builders.  <a href="classQuery.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInsertQuery.html">InsertQuery</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">General class for an abstracted INSERT query.  <a href="classInsertQuery.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDeleteQuery.html">DeleteQuery</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">General class for an abstracted DELETE operation.  <a href="classDeleteQuery.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTruncateQuery.html">TruncateQuery</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">General class for an abstracted TRUNCATE operation.  <a href="classTruncateQuery.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUpdateQuery.html">UpdateQuery</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">General class for an abstracted UPDATE operation.  <a href="classUpdateQuery.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMergeQuery.html">MergeQuery</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">General class for an abstracted MERGE query operation.  <a href="classMergeQuery.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDatabaseCondition.html">DatabaseCondition</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic class for a series of conditions in a query.  <a href="classDatabaseCondition.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceQueryExtendableInterface.html">QueryExtendableInterface</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface for extendable query objects.  <a href="interfaceQueryExtendableInterface.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceSelectQueryInterface.html">SelectQueryInterface</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface definition for a Select <a class="el" href="classQuery.html" title="Base class for query builders.">Query</a> object.  <a href="interfaceSelectQueryInterface.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSelectQueryExtender.html">SelectQueryExtender</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The base extender class for Select queries.  <a href="classSelectQueryExtender.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSelectQuery.html">SelectQuery</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classQuery.html" title="Base class for query builders.">Query</a> builder for SELECT statements.  <a href="classSelectQuery.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="files"></a>
Files</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="query_8inc.html">query.inc</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><p>Non-specific <a class="el" href="classDatabase.html" title="Primary front-controller for the database system.">Database</a> query code. </p>
<br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_gafa3b6cb2b2f61479cc63a4150c62da9b.html#gafa3b6cb2b2f61479cc63a4150c62da9b">db_query</a> ($query, array $args=array(), array $options=array())</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The following utility functions are simply convenience wrappers.  <a href="#gafa3b6cb2b2f61479cc63a4150c62da9b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_gadd8bfb4984a4c69ac741b2bb20d6b9bf.html#gadd8bfb4984a4c69ac741b2bb20d6b9bf">db_query_range</a> ($query, $from, $count, array $args=array(), array $options=array())</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes a query against the active database, restricted to a range.  <a href="#gadd8bfb4984a4c69ac741b2bb20d6b9bf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_gaac717e09516a8acb0ff82b3a990c13a6.html#gaac717e09516a8acb0ff82b3a990c13a6">db_query_temporary</a> ($query, array $args=array(), array $options=array())</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes a query string and saves the result set to a temporary table.  <a href="#gaac717e09516a8acb0ff82b3a990c13a6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_gaadfbffaf30ff5eb14f1bd88619351345.html#gaadfbffaf30ff5eb14f1bd88619351345">db_insert</a> ($table, array $options=array())</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a new <a class="el" href="classInsertQuery.html" title="General class for an abstracted INSERT query.">InsertQuery</a> object for the active database.  <a href="#gaadfbffaf30ff5eb14f1bd88619351345"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_ga429c73a1bdc6dbb18c4a4a8a2235beaf.html#ga429c73a1bdc6dbb18c4a4a8a2235beaf">db_merge</a> ($table, array $options=array())</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a new <a class="el" href="classMergeQuery.html" title="General class for an abstracted MERGE query operation.">MergeQuery</a> object for the active database.  <a href="#ga429c73a1bdc6dbb18c4a4a8a2235beaf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_ga40967197ee5d6a23a5c5a77e627067fe.html#ga40967197ee5d6a23a5c5a77e627067fe">db_update</a> ($table, array $options=array())</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a new <a class="el" href="classUpdateQuery.html" title="General class for an abstracted UPDATE operation.">UpdateQuery</a> object for the active database.  <a href="#ga40967197ee5d6a23a5c5a77e627067fe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_ga72f0ccecc0ba181de16c6e3451150f2c.html#ga72f0ccecc0ba181de16c6e3451150f2c">db_delete</a> ($table, array $options=array())</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a new <a class="el" href="classDeleteQuery.html" title="General class for an abstracted DELETE operation.">DeleteQuery</a> object for the active database.  <a href="#ga72f0ccecc0ba181de16c6e3451150f2c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_gaf6b4b59f572821cfd043317b81eeb71e.html#gaf6b4b59f572821cfd043317b81eeb71e">db_truncate</a> ($table, array $options=array())</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a new <a class="el" href="classTruncateQuery.html" title="General class for an abstracted TRUNCATE operation.">TruncateQuery</a> object for the active database.  <a href="#gaf6b4b59f572821cfd043317b81eeb71e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_ga9e030cee657d64e3d8e524c65814cc9f.html#ga9e030cee657d64e3d8e524c65814cc9f">db_select</a> ($table, $alias=NULL, array $options=array())</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a new <a class="el" href="classSelectQuery.html" title="Query builder for SELECT statements.">SelectQuery</a> object for the active database.  <a href="#ga9e030cee657d64e3d8e524c65814cc9f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_gabdd0e69f5b2c63f8ad9e76f0fdf552be.html#gabdd0e69f5b2c63f8ad9e76f0fdf552be">db_transaction</a> ($name=NULL, array $options=array())</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a new transaction object for the active database.  <a href="#gabdd0e69f5b2c63f8ad9e76f0fdf552be"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_ga954d1bbb12742f285927e43f9489fdaf.html#ga954d1bbb12742f285927e43f9489fdaf">db_set_active</a> ($key= 'default')</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a new active database.  <a href="#ga954d1bbb12742f285927e43f9489fdaf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_ga3bc27db8c5946da0cab63d9b6314d48d.html#ga3bc27db8c5946da0cab63d9b6314d48d">db_escape_table</a> ($table)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Restricts a dynamic table name to safe characters.  <a href="#ga3bc27db8c5946da0cab63d9b6314d48d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_ga7e3c82a45a3e894ce2b4a5a37fa69246.html#ga7e3c82a45a3e894ce2b4a5a37fa69246">db_escape_field</a> ($field)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Restricts a dynamic column or constraint name to safe characters.  <a href="#ga7e3c82a45a3e894ce2b4a5a37fa69246"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_ga4e86622a079f0992dbb987e66320be7a.html#ga4e86622a079f0992dbb987e66320be7a">db_like</a> ($string)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Escapes characters that work as wildcard characters in a LIKE pattern.  <a href="#ga4e86622a079f0992dbb987e66320be7a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_gabf958ef859f66154f7fd705eda7a06af.html#gabf958ef859f66154f7fd705eda7a06af">db_driver</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the name of the currently active database driver.  <a href="#gabf958ef859f66154f7fd705eda7a06af"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_ga3ee89e12a6f70888bfe4ac30f89df442.html#ga3ee89e12a6f70888bfe4ac30f89df442">db_close</a> (array $options=array())</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the active database connection.  <a href="#ga3ee89e12a6f70888bfe4ac30f89df442"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_gab0a2cb3e94525a74407740043b821c5b.html#gab0a2cb3e94525a74407740043b821c5b">db_next_id</a> ($existing_id=0)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a unique id.  <a href="#gab0a2cb3e94525a74407740043b821c5b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_ga1a7695a360b8c2219fe1998dfc272080.html#ga1a7695a360b8c2219fe1998dfc272080">db_or</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a new <a class="el" href="classDatabaseCondition.html" title="Generic class for a series of conditions in a query.">DatabaseCondition</a>, set to "OR" all conditions together.  <a href="#ga1a7695a360b8c2219fe1998dfc272080"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_ga39ab6e9c3b5316eb4d8fe8f52af91acc.html#ga39ab6e9c3b5316eb4d8fe8f52af91acc">db_and</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a new <a class="el" href="classDatabaseCondition.html" title="Generic class for a series of conditions in a query.">DatabaseCondition</a>, set to "AND" all conditions together.  <a href="#ga39ab6e9c3b5316eb4d8fe8f52af91acc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_ga85bb17ee005f930dd2caa93f0752d0e8.html#ga85bb17ee005f930dd2caa93f0752d0e8">db_xor</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a new <a class="el" href="classDatabaseCondition.html" title="Generic class for a series of conditions in a query.">DatabaseCondition</a>, set to "XOR" all conditions together.  <a href="#ga85bb17ee005f930dd2caa93f0752d0e8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__database_ga7e591c732d1eb7da6813ef79867a9859.html#ga7e591c732d1eb7da6813ef79867a9859">db_condition</a> ($conjunction)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a new <a class="el" href="classDatabaseCondition.html" title="Generic class for a series of conditions in a query.">DatabaseCondition</a>, set to the specified conjunction.  <a href="#ga7e591c732d1eb7da6813ef79867a9859"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>Allow the use of different database servers using the same code base. </p>
<p>Drupal provides a database abstraction layer to provide developers with the ability to support multiple database servers easily. The intent of this layer is to preserve the syntax and power of SQL as much as possible, but also allow developers a way to leverage more complex functionality in a unified way. It also provides a structured interface for dynamically constructing queries when appropriate, and enforcing security checks and similar good practices.</p>
<p>The system is built atop PHP's PDO (PHP Data Objects) database API and inherits much of its syntax and semantics.</p>
<p>Most Drupal database SELECT queries are performed by a call to <a class="el" href="group__database_gafa3b6cb2b2f61479cc63a4150c62da9b.html#gafa3b6cb2b2f61479cc63a4150c62da9b" title="The following utility functions are simply convenience wrappers.">db_query()</a> or <a class="el" href="group__database_gadd8bfb4984a4c69ac741b2bb20d6b9bf.html#gadd8bfb4984a4c69ac741b2bb20d6b9bf" title="Executes a query against the active database, restricted to a range.">db_query_range()</a>. Module authors should also consider using the <a class="el" href="classPagerDefault.html" title="Query extender for pager queries.">PagerDefault</a> Extender for queries that return results that need to be presented on multiple pages, and the Tablesort Extender for generating appropriate queries for sortable tables.</p>
<p>For example, one might wish to return a list of the most recent 10 nodes authored by a given user. Instead of directly issuing the SQL query </p>
<div class="fragment"><pre class="fragment"> SELECT n.nid, n.title, n.created FROM node n WHERE n.uid = $uid LIMIT 0, 10;
</pre></div><p> one would instead call the Drupal functions: </p>
<div class="fragment"><pre class="fragment"> $result = <a class="code" href="group__database_gadd8bfb4984a4c69ac741b2bb20d6b9bf.html#gadd8bfb4984a4c69ac741b2bb20d6b9bf" title="Executes a query against the active database, restricted to a range.">db_query_range</a>(<span class="stringliteral">&#39;SELECT n.nid, n.title, n.created</span>
<span class="stringliteral">   FROM {node} n WHERE n.uid = :uid&#39;</span>, 0, 10, array(<span class="stringliteral">&#39;:uid&#39;</span> =&gt; $uid));
 <span class="keywordflow">foreach</span> ($result as $record) {
   <span class="comment">// Perform operations on $record-&gt;title, etc. here.</span>
 }
</pre></div><p> Curly braces are used around "node" to provide table prefixing via <a class="el" href="classDatabaseConnection_a10dfbe0177bc8c79a8589cc84afe24dd.html#a10dfbe0177bc8c79a8589cc84afe24dd" title="Appends a database prefix to all tables in a query.">DatabaseConnection::prefixTables()</a>. The explicit use of a user ID is pulled out into an argument passed to <a class="el" href="group__database_gafa3b6cb2b2f61479cc63a4150c62da9b.html#gafa3b6cb2b2f61479cc63a4150c62da9b" title="The following utility functions are simply convenience wrappers.">db_query()</a> so that SQL injection attacks from user input can be caught and nullified. The LIMIT syntax varies between database servers, so that is abstracted into <a class="el" href="group__database_gadd8bfb4984a4c69ac741b2bb20d6b9bf.html#gadd8bfb4984a4c69ac741b2bb20d6b9bf" title="Executes a query against the active database, restricted to a range.">db_query_range()</a> arguments. Finally, note the PDO-based ability to iterate over the result set using foreach ().</p>
<p>All queries are passed as a prepared statement string. A prepared statement is a "template" of a query that omits literal or variable values in favor of placeholders. The values to place into those placeholders are passed separately, and the database driver handles inserting the values into the query in a secure fashion. That means you should never quote or string-escape a value to be inserted into the query.</p>
<p>There are two formats for placeholders: named and unnamed. Named placeholders are strongly preferred in all cases as they are more flexible and self-documenting. Named placeholders should start with a colon ":" and can be followed by one or more letters, numbers or underscores.</p>
<p>Named placeholders begin with a colon followed by a unique string. Example: </p>
<div class="fragment"><pre class="fragment"> SELECT nid, title FROM {node} WHERE uid=:uid;
</pre></div><p>":uid" is a placeholder that will be replaced with a literal value when the query is executed. A given placeholder label cannot be repeated in a given query, even if the value should be the same. When using named placeholders, the array of arguments to the query must be an associative array where keys are a placeholder label (e.g., :uid) and the value is the corresponding value to use. The array may be in any order.</p>
<p>Unnamed placeholders are simply a question mark. Example: </p>
<div class="fragment"><pre class="fragment"> SELECT nid, title FROM {node} WHERE uid=?;
</pre></div><p>In this case, the array of arguments must be an indexed array of values to use in the exact same order as the placeholders in the query.</p>
<p>Note that placeholders should be a "complete" value. For example, when running a LIKE query the SQL wildcard character, %, should be part of the value, not the query itself. Thus, the following is incorrect: </p>
<div class="fragment"><pre class="fragment"> SELECT nid, title FROM {node} WHERE title LIKE :title%;
</pre></div><p> It should instead read: </p>
<div class="fragment"><pre class="fragment"> SELECT nid, title FROM {node} WHERE title LIKE :title;
</pre></div><p> and the value for :title should include a % as appropriate. Again, note the lack of quotation marks around :title. Because the value is not inserted into the query as one big string but as an explicitly separate value, the database server knows where the query ends and a value begins. That is considerably more secure against SQL injection than trying to remember which values need quotation marks and string escaping and which don't.</p>
<p>INSERT, UPDATE, and DELETE queries need special care in order to behave consistently across all different databases. Therefore, they use a special object-oriented API for defining a query structurally. For example, rather than: </p>
<div class="fragment"><pre class="fragment"> INSERT INTO node (nid, title, body) VALUES (1, &#39;my title&#39;, &#39;my body&#39;);
</pre></div><p> one would instead write: </p>
<div class="fragment"><pre class="fragment"> $fields = array(<span class="stringliteral">&#39;nid&#39;</span> =&gt; 1, <span class="stringliteral">&#39;title&#39;</span> =&gt; <span class="stringliteral">&#39;my title&#39;</span>, <span class="stringliteral">&#39;body&#39;</span> =&gt; <span class="stringliteral">&#39;my body&#39;</span>);
 <a class="code" href="group__database_gaadfbffaf30ff5eb14f1bd88619351345.html#gaadfbffaf30ff5eb14f1bd88619351345" title="Returns a new InsertQuery object for the active database.">db_insert</a>(<span class="stringliteral">&#39;node&#39;</span>)-&gt;fields($fields)-&gt;execute();
</pre></div><p> This method allows databases that need special data type handling to do so, while also allowing optimizations such as multi-insert queries. UPDATE and DELETE queries have a similar pattern.</p>
<p>Drupal also supports transactions, including a transparent fallback for databases that do not support transactions. To start a new transaction, simply call $txn = <a class="el" href="group__database_gabdd0e69f5b2c63f8ad9e76f0fdf552be.html#gabdd0e69f5b2c63f8ad9e76f0fdf552be" title="Returns a new transaction object for the active database.">db_transaction()</a>; in your own code. The transaction will remain open for as long as the variable $txn remains in scope. When $txn is destroyed, the transaction will be committed. If your transaction is nested inside of another then Drupal will track each transaction and only commit the outer-most transaction when the last transaction object goes out out of scope, that is, all relevant queries completed successfully.</p>
<p>Example: </p>
<div class="fragment"><pre class="fragment"> <span class="keyword">function</span> my_transaction_function() {
   <span class="comment">// The transaction opens here.</span>
   $txn = <a class="code" href="group__database_gabdd0e69f5b2c63f8ad9e76f0fdf552be.html#gabdd0e69f5b2c63f8ad9e76f0fdf552be" title="Returns a new transaction object for the active database.">db_transaction</a>();

   <span class="keywordflow">try</span> {
     $id = <a class="code" href="group__database_gaadfbffaf30ff5eb14f1bd88619351345.html#gaadfbffaf30ff5eb14f1bd88619351345" title="Returns a new InsertQuery object for the active database.">db_insert</a>(<span class="stringliteral">&#39;example&#39;</span>)
       -&gt;fields(array(
         <span class="stringliteral">&#39;field1&#39;</span> =&gt; <span class="stringliteral">&#39;mystring&#39;</span>,
         <span class="stringliteral">&#39;field2&#39;</span> =&gt; 5,
       ))
       -&gt;execute();

     my_other_function($id);

     <span class="keywordflow">return</span> $id;
   }
   <span class="keywordflow">catch</span> (<a class="code" href="classException.html" title="to throw error if a module update fails.">Exception</a> $e) {
     <span class="comment">// Something went wrong somewhere, so roll back now.</span>
     $txn-&gt;rollback();
     <span class="comment">// Log the exception to watchdog.</span>
     <a class="code" href="bootstrap_8inc_aba38f35647efce6b4099dc59131e216b.html#aba38f35647efce6b4099dc59131e216b" title="Logs an exception.">watchdog_exception</a>(<span class="stringliteral">&#39;type&#39;</span>, $e);
   }

   <span class="comment">// $txn goes out of scope here.  Unless the transaction was rolled back, it</span>
   <span class="comment">// gets automatically committed here.</span>
 }

 <span class="keyword">function</span> my_other_function($id) {
   <span class="comment">// The transaction is still open here.</span>

   <span class="keywordflow">if</span> ($id % 2 == 0) {
     <a class="code" href="group__database_ga40967197ee5d6a23a5c5a77e627067fe.html#ga40967197ee5d6a23a5c5a77e627067fe" title="Returns a new UpdateQuery object for the active database.">db_update</a>(<span class="stringliteral">&#39;example&#39;</span>)
       -&gt;condition(<span class="stringliteral">&#39;id&#39;</span>, $id)
       -&gt;fields(array(<span class="stringliteral">&#39;field2&#39;</span> =&gt; 10))
       -&gt;execute();
   }
 }
</pre></div><p><a class="el" href="">http://drupal.org/developing/api/database</a></p>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 22 2012 16:46:17 for Shopcart by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
